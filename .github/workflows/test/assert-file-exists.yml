name: Test Assert File Exists
on:
  workflow_call:

jobs:
  before-all:
    name: Before All
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v6
      - name: Create Temp File
        id: create-temp-file
        run: |
          temp_file=$(mktemp test-file-XXXX.txt)
          echo "This is a test file." > "$temp_file"
          echo "existing-file-path=$temp_file" >> $GITHUB_OUTPUT
      - name: Create Artifact
        uses: actions/upload-artifact@v3
        with:
          path: ${{ steps.create-temp-file.outputs.existing-file-path }}
          name: temp-file

  test-correct-path-and-message:
    runs-on: ubuntu-latest
    needs: before-all
    steps:
      - uses: actions/checkout@v6
      - name: Download Temp File
        uses: actions/download-artifact@v7
        with:
          path: temp-file
          name: temp-file
      - name: Act
        id: act
        continue-on-error: true
        uses: jaronline/action-assertions/assert-file-exists@${{ github.ref }}
        with:
          path: temp-file
          message: file not found
      - name: Assert does not error
        uses: jaronline/action-assertions/assert-equals@v1
        with:
          expected: success
          actual: ${{ steps.act.outcome }}
